<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description"
          content="How to embed identifiers in Bluetooth Low Energy advertising packets to maximise interoperability and interpretability.">
    <link rel="stylesheet" href="../common/style/bootstrappyactive.min.css">
    <script type="module" src="../common/js/color-modes.js"></script>
    <title> Best practices for Bluetooth Low Energy (BLE) identifiers </title>
    <!----- Structured, linked metadata (JSON-LD & Schema.org) ----->
    <script type="application/ld+json">
    [{
      "@context": "https://schema.org", 
      "@type": "TechArticle",
      "headline": "Best practices for Bluetooth Low Energy (BLE) identifiers",
      "description": "How to embed identifiers in Bluetooth Low Energy advertising packets to maximise interoperability and interpretability.",
      "proficiencyLevel": "Beginner",
      "genre": "tutorial",
      "image": "https://reelyactive.github.io/diy/best-practices-ble-identifiers/images/header.png",
      "author": {
        "@type": "Organization",
        "url": "https://www.reelyactive.com"
      }
    },
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "reelyActive Developers",
        "item": "https://reelyactive.github.io"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "Best practices for Bluetooth Low Energy identifiers"
      }]
    }]
    </script>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar sticky-top navbar-expand-lg bg-body-tertiary shadow">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">
          <img src="../common/images/reelyactive-developers-logo-nav.png"
               width="135" height="30" alt="reelyActive Developers">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarItems" aria-controls="navbarItems"
                aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarItems">
          <!-- Left-aligned navigation items -->
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          </ul>
          <!-- Right-aligned navigation items -->
          <ul class="navbar-nav">
            <!-- Colour theme chooser -->
            <li class="nav-item dropdown">
              <button class="btn btn-link nav-link dropdown-toggle"
                      id="bd-theme" type="button" aria-expanded="false"
                      data-bs-toggle="dropdown" data-bs-display="static"
                      aria-label="Toggle theme (auto)">
                <i class="fas fa-adjust"></i>
              </button>
              <ul class="dropdown-menu dropdown-menu-end shadow"
                  aria-labelledby="bd-theme-text">
                <li>
                  <button type="button" class="dropdown-item"
                          data-bs-theme-value="light" aria-pressed="false">
                    <i class="fas fa-sun"></i> Light
                  </button>
                </li>
                <li>
                  <button type="button" class="dropdown-item"
                          data-bs-theme-value="dark" aria-pressed="false">
                    <i class="fas fa-moon"></i> Dark
                  </button>
                </li>
                <li>
                  <button type="button" class="dropdown-item active"
                          data-bs-theme-value="auto" aria-pressed="true">
                    <i class="fas fa-adjust"></i> Auto
                  </button>
                </li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" id="navbarInfoDropdown"
                 role="button" data-bs-toggle="dropdown" aria-haspopup="true"
                 aria-expanded="false">
                <i class="fas fa-question-circle"></i>
              </a>
              <!-- Info about tracking and open source software/licenses -->
              <ul class="dropdown-menu dropdown-menu-end shadow"
                   aria-labelledby="navbarInfoDropdown">
                <li>
                  <a class="dropdown-item"
                     href="https://www.reelyactive.com/how-we-observe/#digital">
                    <i class="fas fa-mouse-pointer"></i>
                    Privacy-centric metrics
                    (<i class="fab fa-cloudflare"></i> beacon.js) &nbsp;
                    <span class="badge bg-warning animate-breathing">
                      <i class="fas fa-user-tag"></i>
                    </span>
                  </a>
                </li>
                <li class="dropdown-divider"></li>
                <li>
                  <a class="dropdown-item" target="_blank"
                     href="https://getbootstrap.com" >
                    <i class="fab fa-bootstrap"></i>
                    Bootstrap 5 &nbsp;
                    <span class="badge bg-light text-dark">
                      <i class="fab fa-osi"></i> MIT
                    </span>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" target="_blank"
                     href="https://fontawesome.com" >
                    <i class="fab fa-font-awesome"></i>
                    Font Awesome (Free) &nbsp;
                    <span class="badge bg-light text-dark">
                      <i class="fab fa-creative-commons"></i>
                      <i class="fab fa-osi"></i> MIT
                    </span>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" target="_blank"
                     href="https://github.com/reelyactive/web-style-guide/" >
                    <i class="fas fa-code"></i>
                    Web Style Guide &nbsp;
                    <span class="badge bg-light text-dark">
                      <i class="fab fa-osi"></i> MIT
                   </span>
                  </a>
                </li>
                <li class="dropdown-divider"></li>
                <li>
                  <a class="dropdown-item" target="_blank"
                     href="https://www.reelyactive.com/made-in-montreal/" >
                    <i class="fab fa-canadian-maple-leaf"></i>
                    Made in Montr&eacute;al &nbsp;
                    <i class="fas fa-city"></i>
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container-fluid">
      <div class="row justify-content-center">
        <div class="col-sm-12 col-md-10 col-lg-8 col-xl-6">
          <h1 class="mt-4"> Best practices for BLE identifiers </h1>
          <p class="lead"> Assignment of Bluetooth Low Energy (BLE) identifiers for interoperability and interpretability </p>
          <img src="images/header.png" class="img-fluid"
               alt="Best practices for Bluetooth Low Energy (BLE) identifiers">
          <!----- The TL;DR ----->
          <div class="card hover-shadow my-4">
            <div class="card-body">
              <h2>
                The TL;DR
                <small class="text-muted"> (Too Long; Didn't Read) </small>
              </h2>
              <p class="lead"> Learn how we at reelyActive assign BLE identifiers based on best practices we've established. </p>
              <hr>
              <dl class="row">
                <dt class="col-sm-3"> Established how? </dt>
                <dd class="col-sm-9"> When we founded reelyActive in 2012, we recognised that BLE would become the de facto global standard for active RFID, and have been consistently outspoken about best practices. </dd>
                <dt class="col-sm-3"> Why best practices? </dt>
                <dd class="col-sm-9"> BLE devices are all around us, representing people, products and places.  Best practices foster spontaneous discovery and interpretation, and maximise interoperability. </dd>
                <dt class="col-sm-3"> Are these observed? </dt>
                <dd class="col-sm-9"> Not especially.  As of 2020, we've seen few standard best practices emerge, hence our motivation to create this tutorial and <em>The InteroperaBLE Identifier! </em></dd>
              </dl>
            </div>
          </div>
          <h2 class="mt-4"> Best practices breakdown </h2>
          <p> This tutorial is organised into four parts as follows: </p>
          <dl class="row">
            <dt class="col-sm-2 offset-sm-1">
              <span class="lead">
                <a href="#part01" class="badge text-bg-primary">Part 1 of 4</a>
              </span>
            </dt>
            <dd class="col-sm-9">
              <span class="lead"> Anatomy of a BLE advertising packet </span> <br>
              <span class="text-muted"> Just enough structure with just enough space for data. </span>
            </dd>
            <dt class="col-sm-2 offset-sm-1"> 
              <span class="lead">
                <a href="#part02" class="badge text-bg-primary">Part 2 of 4</a>
              </span>
            </dt>
            <dd class="col-sm-9">
              <span class="lead"> Platform and OS constraints </span> <br>
              <span class="text-muted"> Just because it's <em>possible</em> doesn't mean it's <em>permitted</em> </span>
            </dd>
            <dt class="col-sm-2 offset-sm-1">
              <span class="lead">
                <a href="#part03" class="badge text-bg-primary">Part 3 of 4</a>
              </span>
            </dt>
            <dd class="col-sm-9">
              <span class="lead"> Existing protocols and standards </span> <br>
              <span class="text-muted"> Eddystone and iBeacon are widely observed open standards </span>
            </dd>
            <dt class="col-sm-2 offset-sm-1"> 
              <span class="lead">
                <a href="#part04" class="badge text-bg-primary">Part 4 of 4</a>
              </span>
            </dt>
            <dd class="col-sm-9">
              <span class="lead"> The InteroperaBLE Identifier </span> <br>
              <span class="text-muted"> Our best practice proposal for maximum interoperability </span>
            </dd>
          </dl>
          <p> Links to related tutorials are provided at the end. </p>
          <!----- Part 1 of 4 ----->
          <div class="card hover-shadow mt-5 bg-body-secondary border-0">
            <div class="card-body pt-4">
              <h2 id="part01" class="card-title my-2">
                Anatomy of a BLE advertising packet &nbsp;
                <a href="#part01" class="badge text-bg-primary">Part 1 of 4</a>
              </h2>
              <p class="lead"> Just enough structure with just enough space for data. </p>
              <hr>
              <dl class="row">
                <dt class="col-sm-3"> Advertising packet? </dt>
                <dd class="col-sm-9"> Here we'll examine only the advertising packets that BLE devices can spontaneously broadcast to any devices listening in range. </dd>
                <dt class="col-sm-3"> Why not other packets? </dt>
                <dd class="col-sm-9"> Paired (one-to-one) communication between Bluetooth devices is outside the scope of this tutorial, but the best practices for identifiers may nonetheless apply. </dd>
              </dl>
              <!--<img src="images/x.png"
                   class="card-img-bottom" alt="BLE Advertising Packet">-->
            </div>
          </div>
          <h3 class="mt-4"> The advertising packet structure </h3>
          <p> The diagram below illustrates the structure of a BLE advertising packet with the <b>Packet Data Unit (PDU)</b> expanded and identifier content highlighted.  The preamble, access address and CRC are typically generated/processed automatically, and are irrelevant to this discussion. </p>
          <img src="images/ble-advertising-packet.png" class="img-fluid my-2"
               alt="BLE Advertising Packet Structure">
          <h3 class="mt-4"> The <em>mandatory</em> Advertiser Address </h3>
          <p> Every BLE advertising packet includes a <b>48-bit Advertiser Address</b> and a <b>single-bit txAdd flag</b>.  The latter indicates whether this address is: </p>
          <dl class="row">
            <dt class="col-sm-3 col-lg-2 offset-sm-2 offset-lg-3"> 0 | Public </dt>
            <dd class="col-sm-7"> <em>Unique</em> identifier from a block of addresses assigned by the IEEE to the device manufacturer </dd>
            <dt class="col-sm-3 col-lg-2 offset-sm-2 offset-lg-3"> 1 | Random </dt>
            <dd class="col-sm-7"> <em>Random identifier</em> selected automatically in software, or specifically by the user </dd>
          </dl>        
          <p>
            <span class="badge text-bg-warning">
              <i class="fas fa-exclamation-triangle"></i>
            </span>
            &nbsp; A random identifier <em>may not be static</em>.  A device may cycle a random identifier at any time.
          </p>
          <p>
            <span class="badge text-bg-warning">
              <i class="fas fa-exclamation-triangle"></i>
            </span>
            &nbsp; A random identifier <em>may not be unique</em>.  Collisions are nonetheless unlikely unless assignment is non-random.
          </p>
          <h3 class="mt-4"> Other <em>optional</em> identifiers </h3>
          <p> A BLE advertising packet may include an <b>optional payload of up to 31 bytes</b> in which additional identifiers and/or data may reside.  The Bluetooth Generic Access Protocol (GAP), documented <a href="https://www.bluetooth.com/specifications/assigned-numbers/generic-access-profile/" target="_blank">here</a>, affords many payload options.  Below are the most common for identifiers. </p>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="uuidtab" data-bs-toggle="tab"
                 data-bs-target="#uuidcontent" type="button" role="tab"
                 aria-controls="uuidcontent"
                 aria-selected="true"> UUID </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="servicedatatab" data-bs-toggle="tab"
                 data-bs-target="#servicedatacontent" type="button" role="tab"
                 aria-controls="servicedatacontent"
                 aria-selected="false"> Service Data </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="manufacturerdatatab"
                 data-bs-toggle="tab" data-bs-target="#manufacturerdatacontent"
                 type="button" role="tab"
                 aria-controls="manufacturerdatacontent" aria-selected="false">
                Manufacturer Data
              </button>
            </li>
          </ul>
          <div class="tab-content tab-content-border border-light-subtle">
            <div class="tab-pane fade show active" id="uuidcontent"
                 role="tabpanel" aria-labelledby="uuidtab">
              <h4 class="mt-2"> <i class="fas fa-barcode"></i> Identifier as a UUID </h4>
              <p> Bluetooth GAP and the advertising packet payload capacity allow for one or more 16-bit or 32-bit service class UUIDs or a single 128-bit service class UUID.  Only a 128-bit UUID can be user-generated, as the shorter UUIDs are assigned by the Bluetooth SIG. </p>
              <p> A <em>service</em> class UUID is intended to represent a <em> common service</em> among a class of devices.  For instance, a given model of FitBit will advertise a common <em>service</em> UUID. </p>
              <p>
                <span class="badge text-bg-danger">
                  <i class="fas fa-times"></i>
                </span>
                &nbsp; A service class UUID is therefore <em>not</em> suited for the <em>unique</em> identification of a device.
              </p>
            </div>
            <div class="tab-pane fade" id="servicedatacontent"
                 role="tabpanel" aria-labelledby="servicedatatab">
              <h4 class="mt-2"> <i class="fas fa-barcode"></i> Identifier as Service Data </h4>
              <p> Bluetooth GAP and the advertising packet payload capacity allow for the inclusion of up to 20 bytes of data for a specific 16-bit service class UUID. </p>
              <h5> Member Service Data </h5>
              <p> An entity may purchase a 16-bit member service from the Bluetooth SIG and define the service data structure as the wish, either as an open or closed standard.  An example is Google Eddystone which has the reserved UUID <code>0xFEAA</code> and supports several different frame types <a href="https://github.com/google/eddystone/blob/master/protocol-specification.md" target="_blank">defined as open standards</a> (<i class="text-success fas fa-check"></i>).  Eddystone-UID is presented in detail in <a href="#part04">Part 4</a>.  Another example is Tile which has the reserved UUID <code>0xFEED</code> but whose specification is proprietary and not published. </p>
              <h5> GATT Service/Characteristic Data </h5>
              <p> The Bluetooth SIG maintains assigned numbers for <a href="https://www.bluetooth.com/specifications/gatt/services/" target="_blank">GATT Services</a> and <a href="https://www.bluetooth.com/specifications/gatt/characteristics/" target="_blank">Characteristics</a>.  It is possible to include service/characteristic data provided it does not exceed the payload capacity.  An example is reelyActive transceiver infrastructure, where each device advertises its unique EUI-64 identifier as a <a href="https://www.bluetooth.com/xml-viewer/?src=https://www.bluetooth.com/wp-content/uploads/Sitecore-Media-Library/Gatt/Xml/Characteristics/org.bluetooth.characteristic.system_id.xml" target="_blank">System ID characteristic</a> (<code>0x2A23</code>). </p>
              <p>
                <span class="badge text-bg-success">
                  <i class="fas fa-check"></i>
                </span>
                &nbsp; Service data offers several alternatives for the <em>unique</em> identification of a device.
              </p>
            </div>
            <div class="tab-pane fade" id="manufacturerdatacontent"
                 role="tabpanel" aria-labelledby="manufacturerdatatab">
              <h4 class="mt-2"> <i class="fas fa-barcode"></i> Identifier as Manufacturer Data </h4>
              <p> Bluetooth GAP and the advertising packet payload capacity allow for the inclusion of up to 22 bytes of use-as-you-please data for manufacturers who register (at no cost) with the Bluetooth SIG and receive a 16-bit company identifier. </p>
              <p> For instance, iBeacon is <a href="https://developer.apple.com/ibeacon/" target="_blank">defined as an open standard</a> (<i class="text-success fas fa-check"></i>) by Apple, uses their company identifier (<code>0x004C</code>), and includes a 128-bit UUID and a major and minor identifier of 16-bits apiece.  This is presented in detail in <a href="#part04">Part 4</a>. </p>
              <p>
                <span class="badge text-bg-success">
                  <i class="fas fa-check"></i>
                </span>
                &nbsp; Manufacturer data affords full freedom for the <em>unique</em> identification of a device, constrained only by the payload capacity.
              </p>
            </div>
          </div>
          <!----- Part 2 of 4 ----->
          <div class="card hover-shadow mt-5 bg-body-secondary border-0">
            <div class="card-body pt-4">
              <h2 id="part02" class="card-title my-2">
                Platform and OS constraints &nbsp;
                <a href="#part02" class="badge text-bg-primary">Part 2 of 4</a>
              </h2>
              <p class="lead"> Just because it's possible doesn't mean it's permitted by the platform or operating system. </p>
              <hr>
              <dl class="row">
                <dt class="col-sm-3"> Not permitted? </dt>
                <dd class="col-sm-9"> Resource constraints, design decisions, privacy concerns and even business models may restrict what can be sent, received or accessed. </dd>
                <dt class="col-sm-3"> What's the impact? </dt>
                <dd class="col-sm-9"> You might not be able to do <em>what</em> you want, or <em>how</em> you want to do it, especially if it needs to work on <em>all</em> platforms. </dd>
              </dl>
              <!--<img src="images/x.png"
                   class="card-img-bottom" alt="BLE Constraints">-->
            </div>
          </div>
          <h3 class="mt-4"> The BLE processing pipeline </h3>
          <p> The diagram below illustrates the processing pipeline between a raw packet over-the-air and the interface with application software under a developer's control.  Although the advertising packet structure is <em>standard</em>, as presented in the previous section, <b>the processed data available for a software application is <em>not standard</em>:</b> it depends on the platform and OS. </p>
          <p> Similarly, application software is constrained by the platform and OS with regard to any advertising packets it wishes to transmit. </p>
          <img src="images/ble-constraints-processing-structure.png"
               class="img-fluid my-2" alt="BLE Platform and OS Constraints">
          <h3 class="mt-4"> Key constraints by platform/OS </h3>
          <p> The table below highlights the key constraints with respect to receiving and transmitting identifier data in BLE advertising packets. </p>
          <table class="table table-hover text-center">
            <thead class="table-dark">
              <tr>
                <th scope="col"> &nbsp; </th>
                <th scope="col"> Raw </th>
                <th scope="col">
                  <i class="fab fa-apple"></i>
                  <i class="fas fa-mobile-alt"></i>
                </th>
                <th scope="col">
                  <i class="fab fa-android"></i>
                  <i class="fas fa-mobile-alt"></i>
                </th>
                <th scope="col"> Espruino </th>
                <th scope="col"> Web <i class="fab fa-bluetooth"></i> </th>
              </tr>
            </thead>
            <tbody>
              <tr class="text-start table-info">
                <th colspan="6">
                  <i class="fas fa-search"></i> &nbsp; Receive functionality
                </th>
              </tr>
              <tr>
                <th scope="row" class="text-start"> Access advertiser address </th>
                <td>
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-light">
                    <i class="fas fa-times"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td>
                  <span class="badge rounded-pill text-bg-light">
                    <i class="fas fa-times"></i>
                  </span>
                </td>
              </tr>
              <tr>
                <th scope="row" class="text-start"> Access PDU elements </th>
                <td>
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td>
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
              </tr>
              <tr>
                <th scope="row" class="text-start"> Access raw PDU </th>
                <td>
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-light">
                    <i class="fas fa-times"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-light">
                    <i class="fas fa-times"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-light">
                    <i class="fas fa-times"></i>
                  </span>
                </td>
                <td>
                  <span class="badge rounded-pill text-bg-light">
                    <i class="fas fa-times"></i>
                  </span>
                </td>
              </tr>
              <tr class="text-start table-info">
                <th colspan="6">
                  <i class="fas fa-wifi"></i> &nbsp; Transmit functionality
                </th>
              </tr>
              <tr>
                <th scope="row" class="text-start"> Specify advertiser address </th>
                <td>
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-warning">
                    <i class="fas fa-redo"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-warning">
                    <i class="fas fa-redo"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td>
                  <span class="badge rounded-pill text-bg-light">
                    <i class="fas fa-minus"></i>
                  </span>
                </td>
              </tr>
              <tr>
                <th scope="row" class="text-start"> Transmit iBeacon </th>
                <td>
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td>
                  <span class="badge rounded-pill text-bg-light">
                    <i class="fas fa-minus"></i>
                  </span>
                </td>
              </tr>
              <tr>
                <th scope="row" class="text-start"> Transmit user-defined payload </th>
                <td>
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-light">
                    <i class="fas fa-times"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td> 
                  <span class="badge rounded-pill text-bg-success">
                    <i class="fas fa-check"></i>
                  </span>
                </td>
                <td>
                  <span class="badge rounded-pill text-bg-light">
                    <i class="fas fa-minus"></i>
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
          <p>
            <span class="badge rounded-pill text-bg-warning">
              <i class="fas fa-redo"></i>
            </span>
            &nbsp; Mobile devices <i class="fas fa-mobile-alt"></i> use a random advertiser address which they cycle regularly (ex: every 15 minutes)
          </p>
          <p>
            <span class="badge rounded-pill text-bg-primary">
              <i class="fas fa-info-circle"></i>
            </span>
            &nbsp; reelyActive infrastructure operates raw, without a Bluetooth stack
          </p>
          <h3 class="mt-4"> Identifier interoperability summary </h3>
          <p> The objective of BLE identifier best practices being to <em>maximise interoperability</em>, the platform and OS constraints presented above lead to the following observations: </p>
          <dl class="row">
            <dt class="col-sm-4 offset-sm-1"> 
              <span class="badge rounded-pill text-bg-danger">
                <i class="fas fa-times"></i>
              </span>
              &nbsp; Advertiser Address
            </dt>
            <dd class="col-sm-7"> Although <em>mandatory</em>, access is not universal and mobile devices cycle the identifier periodically in the interest of user privacy (<i class="text-success fas fa-check"></i>). </dd>
            <dt class="col-sm-4 offset-sm-1">
              <span class="badge rounded-pill text-bg-success">
                <i class="fas fa-check"></i>
              </span>
              &nbsp; Identifier in payload
            </dt>
            <dd class="col-sm-7"> All platforms allow <em>access</em> in some form to packet payload elements, and allow some form of user-defined payload <em>transmission</em>. </dd>
          </dl> 
          <p> The following section presents existing protocols and standards which include identifiers in the BLE advertising packet payload. </p>
          <!----- Part 3 of 4 ----->
          <div class="card hover-shadow mt-5 bg-body-secondary border-0">
            <div class="card-body pt-4">
              <h2 id="part03" class="card-title my-2">
                Existing protocols and standards &nbsp;
                <a href="#part03" class="badge text-bg-primary">Part 3 of 4</a>
              </h2>
              <p class="lead"> Eddystone and iBeacon are among the few widely observed open standards. </p>
              <hr>
              <dl class="row">
                <dt class="col-sm-3"> Whose standards? </dt>
                <dd class="col-sm-9"> Apple introduced the iBeacon open standard in 2013 and Google followed suit with the Eddystone open standard in 2015. </dd>
                <dt class="col-sm-3"> Et tu, Bluetooth? </dt>
                <dd class="col-sm-9"> The Bluetooth Core Specification is the foundation for higher-level protocols such as the above. </dd>
              </dl>
              <!--<img src="images/x.png"
                   class="card-img-bottom" alt="BLE Constraints">-->
            </div>
          </div>
          <h3 class="mt-4"> Beacons: a brief history </h3>
          <p> In 2013 Apple unveiled iBeacon to enhance the location awareness and interactivity of their mobile devices.  By strategically placing inexpensive battery-powered beacons throughout a space, mobile devices can estimate their position and/or trigger actions based on proximity. </p>
          <p> The week of the iBeacon launch, we published <a href="https://youtu.be/CsYNHXSlVQY" target="_blank">this video</a> demonstrating the potential of the <em>inverse</em> use case, where the mobile device itself <em>transmits</em> iBeacon.  We expanded on this use case in <a href="https://gigaom.com/2013/09/17/loophole-in-ibeacon-could-let-iphones-guard-your-likes-instead-of-bombard-you-with-coupons/" target="_blank">this article featured in GigaOM</a> and <a href="https://www.slideshare.net/reelyActive/advertise-yourself-reelyactive-at-bluetooth-world-2014-59803555" target="_blank">evangelised the concept at Bluetooth World 2014</a>. </p>
          <p> In 2015 Google released Eddystone, similarly intended for battery-powered beacons to transmit information to the mobile device, with Android supporting this use case.  Eddystone extends the proximity beacon concept, adding the potential to transmit a (short) URL, telemetry data and encrypted identifiers. </p>
          <p> Although both iOS and Android allow developers limited possibility to <em>transmit</em> BLE advertising packets, history has shown that Apple and Google are committed to the mobile-device-as-<em>receiver</em> model.  During the brief period of Android support for Google's Physical Web project we were able to demonstrate the limits of mobile peer-to-peer discoverability in <a href="https://youtu.be/eamCXiNkUuE" target="_blank">this video</a> and accompanying <a href="https://reelyactive.com/blog/archives/1066" target="_blank">blog post</a>.  In short, <b>mobile peer-to-peer discovery with BLE is <em>not</em> practically supported by iOS and Android</b>. </p>
          <p> Although the hype around beacons <em>for mobile</em> has long since waned, as of 2020, hundreds of millions of beacons have nonetheless been deployed worldwide, with iBeacon and Eddystone clearly established as the prevailing standards.  As a result, regardless of vendor, <b>a battery-powered beacon purchased today is almost assured to support both iBeacon and Eddystone</b>, often simultaneously, even if these beacons are increasingly destined for <em>non-mobile</em> applications such as personnel/asset tracking and environmental sensing. </p>
          <h3 class="mt-4"> iBeacon and Eddystone-UID </h3>
          <p> The following table compares the properties of iBeacon and Eddystone-UID which together emerged as the standards for proximity identification not just of BLE, but of <em>all</em> active RFID technologies. </p>
          <table class="table table-hover text-center">
            <thead class="table-dark">
              <tr>
                <th scope="col"> &nbsp; </th>
                <th scope="col">
                  <i class="fab fa-apple"></i> &nbsp; iBeacon
                </th>
                <th scope="col"> Eddystone-UID </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th class="text-start"> Entity identifier </th>
                <td> 128-bit UUID </td>
                <td> 80-bit Namespace ID </td>
              </tr>
              <tr>
                <th class="text-start"> Instance identifier </th>
                <td> 16-bit Major & 16-bit Minor </td>
                <td> 48-bit Instance ID </td>
              </tr>
              <tr>
                <th class="text-start"> Tx Power Indication? </th>
                <td> Yes, measured @ 1m </td>
                <td> Yes, measured @ 0m </td>
              </tr>
              <tr>
                <th class="text-start"> Additional data </th>
                <td> &mdash; </td>
                <td> 16-bits RFU* </td>
              </tr>
            </tbody>
          </table>
          <p class="text-right text-muted small"> * Reserved for Future Use </p>
          <p class="mt-2"> In summary, both iBeacon and Eddystone-UID share the same structural elements, although the number of bits allocated to each varies.  Both have <b>at least 80-bits (2<sup>80</sup> values) of entity identifier</b> to indicate to which <em>entity</em> or <em>organisation</em> the device belongs, and <b>at least 32-bits (2<sup>32</sup> values) of instance identifier</b> to uniquely identify the <em>device</em> itself.  Moreover, both provide an indication of transmission power to facilitate ranging and proximity estimations. </p>
          <p> The following section presents a best practice for identification which can be implemented to equal effect in <em>either</em> iBeacon or Eddystone-UID. </p>
          <!----- Part 4 of 4 ----->
          <div class="card hover-shadow mt-5 bg-body-secondary border-0">
            <div class="card-body pt-4">
              <h2 id="part04" class="card-title my-2">
                The InteroperaBLE Identifier &nbsp;
                <a href="#part04" class="badge text-bg-primary">Part 4 of 4</a>
              </h2>
              <p class="lead"> Our best practice proposal for maximum interoperability of BLE identifiers. </p>
              <hr>
              <dl class="row">
                <dt class="col-sm-3"> What's the purpose? </dt>
                <dd class="col-sm-9"> To provide a means of identification that can be interpreted by <em>all</em> platforms and readily translated into a URL for potential association with a digital twin. </dd>
                <dt class="col-sm-3"> Doesn't that exist? </dt>
                <dd class="col-sm-9"> The Physical Web initiative by Google attempted this before it was discontinued.  To the best of our knowledge there are no widely-adopted alternatives. </dd>
              </dl>
              <!--<img src="images/x.png"
                   class="card-img-bottom" alt="InteroperaBLE Identifier">-->
            </div>
          </div>
          <h3 class="mt-4"> The InteroperaBLE Identifier structure </h3>
          <p> As a best practice, we propose the following four elements for a BLE identifier which we shall refer to as the <b>InteroperaBLE Identifier</b>*.  Together, these elements can be transmitted, received and interpreted across platforms and operating systems: </p>
          <dl class="row">
            <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2"> 
              <span class="badge rounded-pill text-bg-primary">
                <i class="fas fa-barcode"></i>
              </span>
              &nbsp; Entity UUID
            </dt>
            <dd class="col-sm-7"> Identifies the entity or organisation responsible for the device. </dd>
            <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2">
              <span class="badge rounded-pill text-bg-primary">
                <i class="fas fa-barcode"></i>
              </span>
              &nbsp; Instance ID
            </dt>
            <dd class="col-sm-7"> Uniquely identifies the individual device (which itself may identify a person, product or place). </dd>
            <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2">
              <span class="badge rounded-pill text-bg-primary">
                <i class="fas fa-sitemap"></i>
              </span>
              &nbsp; Class
            </dt>
            <dd class="col-sm-7"> <em>Optional</em>.  Implicitly indicates what is associated with the device, and/or its hierarchy. </dd>
            <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2">
              <span class="badge rounded-pill text-bg-primary">
                <i class="fas fa-signal"></i>
              </span>
              &nbsp; Tx Power
            </dt>
            <dd class="col-sm-7"> Facilitates the estimation of proximity and/or range. </dd>
          </dl>
          <p class="text-right text-muted small"> * If you're at all familiar with reelyActive, this name should come as no surprise. </p>
          <h3 class="mt-4"> Generating an entity UUID </h3>
          <p> If one does not already exist for the entity or organisation, a 128-bit Version 4 (Random) UUID should be created, observing the following form: </p> 
          <pre class="lead text-center">XXXXXXXX-XXXX-MXXX-NXXX-XXXXXXXXXXXX</pre>
          <p> Each character is hexadecimal (0-9, a-f) with the following constraints: </p>
          <dl class="row">
            <dt class="col-sm-1 offset-sm-1"> X </dt>
            <dd class="col-sm-10"> Any value* </dd>
            <dt class="col-sm-1 offset-sm-1"> M </dt>
            <dd class="col-sm-10"> Must be <b>4</b> to represent Version 4 </dd>
            <dt class="col-sm-1 offset-sm-1"> N </dt>
            <dd class="col-sm-10"> Upper bits must be 10<sub>b</sub> to represent Variant 1 <br> <span class="text-muted"> Valid values for N are therefore <b>8, 9, a or b</b> </span> </dd>
          </dl>
          <p class="text-right text-muted small"> * So long as the entire UUID is unique from that of other entities and organisations. </p>
          <h3 class="mt-4"> Implementation </h3>
          <p> The InteroperaBLE Identifier is implemented as Eddystone-UID and iBeacon as detailed below: </p>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="eddystonetab"
                 data-bs-toggle="tab" data-bs-target="#eddystonecontent"
                 type="button" role="tab" aria-controls="eddystonetab"
                 aria-selected="true"> Eddystone-UID </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="ibeacontab" data-bs-toggle="tab"
                 data-bs-target="#ibeaconcontent" type="button" role="tab"
                 aria-controls="ibeacontab" aria-selected="false">
                <i class="fab fa-apple"></i> &nbsp; iBeacon
              </button>
            </li>
          </ul>
          <!----- Eddystone-UID tab ----->
          <div class="tab-content tab-content-border border-light-subtle">
            <div class="tab-pane fade show active" id="eddystonecontent"
                 role="tabpanel" aria-labelledby="eddystonetab">
              <img src="images/eddystone-uid-identifier-reelyactive-best-practices.png"
                   class="img-fluid"
                   alt="Eddystone-UID identifier best practices">
              <dl class="row mt-4">
                <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2"> 
                  <span class="badge rounded-pill text-bg-dark">
                    <i class="fas fa-barcode"></i>
                  </span>
                  &nbsp; Entity UUID
                </dt>
                <dd class="col-sm-7"> Implement as 80-bit <em>elided</em> UUID in the <b>Namespace</b>. </dd>
                <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2">
                  <span class="badge rounded-pill text-bg-primary">
                    <i class="fas fa-barcode"></i>
                  </span>
                  &nbsp; Instance ID
                </dt>
                <dd class="col-sm-7"> Implement in 28 least-significant bits of <b>Instance</b>. </dd>
                <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2">
                  <span class="badge rounded-pill text-bg-primary">
                    <i class="fas fa-sitemap"></i>
                  </span>
                  &nbsp; Class
                </dt>
                <dd class="col-sm-7"> Implement in bits 28-31 of <b>Instance</b>. </dd>
                <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2">
                  <span class="badge rounded-pill text-bg-dark">
                    <i class="fas fa-signal"></i>
                  </span>
                  &nbsp; Tx Power
                </dt>
                <dd class="col-sm-7"> Implement in <b>Ranging</b> byte. </dd>
              </dl>
              <p>
                <span class="badge text-bg-warning">
                  <i class="fas fa-exclamation-circle"></i>
                </span>
                &nbsp; The <em>elided</em> UUID has the form XXXXXXXX<del>-XXXX-MXXX-NXXX-</del>XXXXXXXXXXXX where 48-bits are removed as indicated by the strikeout, <a href="https://github.com/google/eddystone/tree/master/eddystone-uid#elided-version-4-uuid" target="_blank">as specified in the Eddystone documentation</a>
              </p>
              <p>
                <span class="badge text-bg-primary">
                  <i class="fas fa-info-circle"></i>
                </span>
                &nbsp; The 32 most significant bits of the <b>Instance</b> are not required by the InteroperaBLE Identifier and should be set to zero, unless required for another purpose.
              </p>
            </div>
            <!----- iBeacon implementation tab ----->
            <div class="tab-pane fade" id="ibeaconcontent"
                 role="tabpanel" aria-labelledby="ibeacontab">
              <img src="images/ibeacon-identifier-reelyactive-best-practices.png"
                   class="img-fluid" alt="iBeacon identifier best practices">
              <dl class="row mt-4">
                <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2"> 
                  <span class="badge rounded-pill text-bg-dark">
                    <i class="fas fa-barcode"></i>
                  </span>
                  &nbsp; Entity UUID
                </dt>
                <dd class="col-sm-7"> Implement as 128-bit UUID in the <b>Proximity UUID</b>. </dd>
                <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2">
                  <span class="badge rounded-pill text-bg-primary">
                    <i class="fas fa-barcode"></i>
                  </span>
                  &nbsp; Instance ID
                </dt>
                <dd class="col-sm-7"> Implement in 28 least-significant bits of the combined <b>Major & Minor</b>. </dd>
                <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2">
                  <span class="badge rounded-pill text-bg-primary">
                    <i class="fas fa-sitemap"></i>
                  </span>
                  &nbsp; Class
                </dt>
                <dd class="col-sm-7"> Implement in the 4 most-significant bits of the <b>Major</b>. </dd>
                <dt class="col-sm-4 col-lg-3 offset-sm-1 offset-lg-2">
                  <span class="badge rounded-pill text-bg-dark">
                    <i class="fas fa-signal"></i>
                  </span>
                  &nbsp; Tx Power
                </dt>
                <dd class="col-sm-7"> Implement in <b>Signal Power</b> byte. </dd>
              </dl>
            </div>
          </div>
          <h3 class="mt-4"> Applications and Resources </h3>
          <p> The InteroperaBLE Identifier open specification is actively used for a variety of novel purposes including: </p>
          <ul>
            <li> transmitting emojis (or any Unicode character) to represent events (i.e. <span class="animate-breathing">&#x1f198;</span> button press, <span class="animate-breathing">&#x1f6aa;</span> door activity, ...) </li>
            <li> <a href="https://www.reelyactive.com/diract/" target="_blank"><i class="fas fa-external-link-alt"></i> DirAct</a> interaction detection <i class="fas fa-people-arrows"></i> </li>
            <li> proximity .mp3 audio playback (ex: <a href="https://github.com/reelyactive/audible-proximity" target="_blank"><i class="fab fa-github"></i>/audible-proximity</a>) </li>
          </ul>
          <p> all of which are defined here: </p>
          <ul class="list-group list-group-horizontal">
            <li class="list-group-item border-0">
              <a href="https://reelyactive.github.io/interoperable-identifier/"
                 target="_blank">
                <img src="https://reelyactive.github.io/interoperable-identifier/images/icon.png">
              </a>
            </li>
            <li class="list-group-item border-0">
              <a href="https://reelyactive.github.io/interoperable-identifier/"
                 target="_blank">
                <h5 class="mt-0 mb-1">
                  <i class="fas fa-external-link-alt"></i>
                  The InteroperaBLE Identifier
                </h5>
              </a>
              An open specification by reelyActive to maximise the interoperability of radio-identifiers.
            </li>
          </ul>
          <p class="mt-2"> Moreover, all defined InteroperaBLE Identifiers are interpreted by our <a href="https://github.com/reelyactive/advlib-interoperable" target="_blank"><i class="fab fa-github"></i>/advlib-interoperable</a> open source interpreter module which is included in our <a href="https://www.reelyactive.com/pareto/anywhere/" target="_blank"><i class="fas fa-external-link-alt"></i> Pareto Anywhere</a> open source middleware for context-aware physical spaces. </p>
          <!----- Where to next ----->
          <hr class="my-4">
          <h2> Where to next? </h2>
          <p class="lead"> Continue exploring our open architecture and all its applications. </p>
          <ul class="list-group list-group-horizontal">
            <li class="list-group-item border-0">
              <a href="/">
                <img src="../common/images/icon.png">
              </a>
            </li>
            <li class="list-group-item border-0">
              <a href="/">
                <h5 class="mt-0 mb-1"> reelyActive Developers </h5>
              </a>
              Browse all developer documentation and tutorials.
            </li>
          </ul>
          <ul class="list-group list-group-horizontal">
            <li class="list-group-item border-0">
              <a href="https://www.reelyactive.com/pareto/anywhere/"
                 target="_blank">
                <img src="../common/images/icon-pareto-anywhere.png">
              </a>
            </li>
            <li class="list-group-item border-0">
              <a href="https://www.reelyactive.com/pareto/anywhere/"
                 target="_blank">
                <h5 class="mt-0 mb-1">
                  <i class="fas fa-external-link-alt"></i>
                  Pareto Anywhere
                </h5>
              </a>
              The open source IoT middleware that makes sense of things.
            </li>
          </ul>
          <ul class="list-group list-group-horizontal mb-4">
            <li class="list-group-item border-0">
              <a href="https://www.reelyactive.com" target="_blank">
                <img src="../common/images/icon-reelyactive.png">
              </a>
            </li>
            <li class="list-group-item border-0">
              <a href="https://www.reelyactive.com" target="_blank">
                <h5 class="mt-0 mb-1">
                  <i class="fas fa-external-link-alt"></i>
                  reelyActive
                </h5>
              </a>
              Together, let's make sense of things.
            </li>
          </ul>
        </div>
      </div>
    </div>
    <footer class="footer bg-dark bg-gradient">
      <a href="https://reelyactive.github.io"> reelyActive Developers </a>
      &nbsp; | &nbsp;
      <a href="https://www.reelyactive.com"> &copy; reelyActive 2020-2024 </a>
    </footer>

    <!-- Optional JavaScript -->
    <script defer src="../common/js/fontawesome-reelyactive.min.js"></script>
    <script src="../common/js/bootstrappyactive.bundle.min.js"></script>
    <script defer src='https://static.cloudflareinsights.com/beacon.min.js'
            data-cf-beacon='{"token": "75099ede11644990a7ffdffc6c28f487"}'>
    </script>
  </body>
</html>
